# himalaya-mcp - Email MCP Server & Claude Code Plugin
# Privacy-first email access via himalaya CLI

## Project: himalaya-mcp
## Type: mcp-server / claude-code-plugin
## Status: active
## Focus: v1.2.0 planning — 8 new tools (attachments, compose, folders, calendar)
## Phase: Planning → Implementation
## Priority: 2
## Progress: 5

## Completed

- Phase 0: Repo scaffold, specs, CI, branch protection
- Phase 1: Core Read MVP — subprocess client, 4 MCP tools, 3 resources
- Phase 2: Triage + Export — flag_email, move_email, export_to_markdown, 3 MCP prompts
- Phase 3: Compose + Actions — draft_reply, send_email (safety gate), create_action_item
- Phase 4: Clipboard + Config — copy_to_clipboard adapter, env-based config
- Phase 5: Plugin Skills — /email:reply skill, agent updates, skill updates
- Plugin Packaging: esbuild bundle (583KB), Homebrew formula, marketplace.json, CLI setup, cross-platform support
- Homebrew Release Automation: homebrew-release.yml (validate → prepare → update-homebrew)
- Total: 11 tools, 4 prompts, 3 resources, 181 tests (11 test files)

## Just Completed

- 2026-02-15: Brainstormed v1.2.0 features (max depth, 8 expert questions, 2 agents)
- 2026-02-15: Created formal spec: SPEC-v1.2.0-features-2026-02-15.md (8 new tools)
- 2026-02-15: Created worktree feature/v1.2.0 for implementation
- 2026-02-14: Fixed cross-repo push auth in homebrew-tap reusable workflow
- 2026-02-14: Fixed Homebrew post-install hang when Claude Code is running
- 2026-02-14: Verified full release pipeline end-to-end

## Current State

- Branch: `dev` (main repo), `feature/v1.2.0` (worktree)
- v1.1.1 released, planning v1.2.0
- Worktree: `~/.git-worktrees/himalaya-mcp/feature-v1.2.0`
- Tests: 181 (target: ~217 after v1.2.0)
- v1.2.0 scope: 8 new tools (11 → 19), 4 features
  - Phase 6a: Folders (create_folder, delete_folder, list_folders)
  - Phase 6b: Compose (compose_email)
  - Phase 6c: Attachments (list_attachments, download_attachment)
  - Phase 6d: Calendar (extract_calendar_event, create_calendar_event)

## Install

```bash
# Homebrew (recommended)
brew tap data-wise/tap
brew install himalaya-mcp

# Claude Code plugin (from GitHub)
claude plugin marketplace add Data-Wise/himalaya-mcp
claude plugin install himalaya-mcp

# Claude Desktop
himalaya-mcp setup
```

---

## Next Action

A) Start Phase 6a (Folders) in worktree — simplest feature, 3 tools
B) Review/refine spec before implementing

## Future (post v1.2.0)

- Obsidian adapter — export emails to vault as markdown notes
- Apple ecosystem — Notes/Reminders integration via AppleScript

---

**Last Updated:** 2026-02-15
**Status:** v1.2.0 planned, worktree created, spec ready
