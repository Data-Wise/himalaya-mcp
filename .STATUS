# himalaya-mcp - Email MCP Server & Claude Code Plugin
# Privacy-first email access via himalaya CLI

## Project: himalaya-mcp
## Type: mcp-server / claude-code-plugin
## Status: active
## Focus: .mcpb Desktop Extension packaging
## Phase: v1.3.0 development
## Priority: 2
## Progress: 100 (v1.2.1 released) + WIP (mcpb packaging)

## Completed

- Phase 0: Repo scaffold, specs, CI, branch protection
- Phase 1: Core Read MVP — subprocess client, 4 MCP tools, 3 resources
- Phase 2: Triage + Export — flag_email, move_email, export_to_markdown, 3 MCP prompts
- Phase 3: Compose + Actions — draft_reply, send_email (safety gate), create_action_item
- Phase 4: Clipboard + Config — copy_to_clipboard adapter, env-based config
- Phase 5: Plugin Skills — /email:reply skill, agent updates, skill updates
- Phase 6a: Folders — list_folders, create_folder, delete_folder
- Phase 6b: Compose — compose_email (new messages, two-phase safety gate)
- Phase 6c: Attachments — list_attachments, download_attachment
- Phase 6d: Calendar — extract_calendar_event, create_calendar_event (ICS + Apple Calendar)
- Plugin Packaging: esbuild bundle (595KB), Homebrew formula, marketplace.json, CLI setup
- Homebrew Release: formula updated to v1.2.1, 7 skills, 19 tools in caveats
- Total: 19 tools, 4 prompts, 3 resources, 7 skills, 275 tests (15 test files)

## Just Completed

- 2026-02-17: Brainstorm + spec for .mcpb packaging (max depth, 2 agents)
- 2026-02-17: Shortened marketplace name (himalaya-mcp-marketplace → himalaya-mcp)
- 2026-02-17: Created worktree for feature/mcpb-packaging
- 2026-02-16: Added E2E tests for install/upgrade/config (275 tests)
- 2026-02-16: Fixed setup CLI dynamic path resolution
- 2026-02-16: Generated CLI test suites (automated + interactive)

## Current State

- Branch: `dev` (synced with main after v1.2.1)
- v1.2.1 released on GitHub and Homebrew
- All phases complete, clean working tree
- Tests: 275 across 15 test files
- Bundle: 595KB (esbuild)

## Active Worktrees

| Worktree | Branch | Status |
|----------|--------|--------|
| `~/.git-worktrees/himalaya-mcp/feature-mcpb-packaging` | `feature/mcpb-packaging` | WIP — Phase 1 next |

## Current Work: .mcpb Packaging

Spec: `docs/specs/SPEC-mcpb-packaging-2026-02-17.md`
Orchestrate: `ORCHESTRATE-mcpb-packaging.md` (in worktree)

| Phase | Task | Status |
|-------|------|--------|
| 1 | Create manifest.json | Next |
| 2 | Build script (npm run build:mcpb) | Pending |
| 3 | CI validation | Pending |
| 4 | Test in Claude Desktop | Pending |
| 5 | Documentation updates | Pending |
| 6 | Release integration | Pending |

## Install

```bash
# Homebrew (recommended)
brew tap data-wise/tap
brew install himalaya-mcp

# Claude Code plugin (from GitHub)
claude plugin marketplace add Data-Wise/himalaya-mcp
claude plugin install email

# Claude Desktop
himalaya-mcp setup
```

---

## Next Action

Start Phase 1 in worktree:
```bash
cd ~/.git-worktrees/himalaya-mcp/feature-mcpb-packaging
claude
```

## Future (post v1.3.0)

- Bundled .mcpb variant with universal himalaya binary (~19 MB)
- Code signing + notarization (Apple Developer, $99/yr)
- Official Anthropic extension directory listing
- Obsidian adapter — export emails to vault as markdown notes
- Apple ecosystem — Notes/Reminders integration via AppleScript
- Thread view — group related emails by conversation
- Templates — reusable email templates for common replies

---

**Last Updated:** 2026-02-17
**Status:** v1.2.1 released, .mcpb packaging in progress (worktree)
